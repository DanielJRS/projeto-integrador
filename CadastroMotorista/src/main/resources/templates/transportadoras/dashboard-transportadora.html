<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Transportadora - Global Transportes</title>
    <script th:src="@{/img/js/transportadora/dashboard-transportadora.js}" defer></script>
    <link rel="stylesheet" th:href="@{/img/css/transportadora/dashboard-transportadora.css}">
</head>
<body>
<!-- Sidebar -->
<nav class="sidebar">
    <div class="sidebar-header">
        <div class="sidebar-logo">Global Transportes</div>
    </div>

    <div class="sidebar-menu">
        <div class="sidebar-item">
            <a th:href="@{/transportadora/}" class="sidebar-link">
                <span class="sidebar-icon">ğŸ¢</span>
                <span class="sidebar-text">Dashboard</span>
            </a>
            <div class="sidebar-tooltip">Dashboard</div>
        </div>

        <div class="sidebar-item">
            <a th:href="@{/motorista/gerenciarmotorista}" class="sidebar-link">
                <span class="sidebar-text">Gerenciar Motoristas</span>
            </a>
            <div class="sidebar-tooltip">Cadastrar Motorista</div>
        </div>

        <div class="sidebar-item">
            <a th:href="@{/veiculos/novo}" class="sidebar-link">
                <span class="sidebar-icon">ğŸš›</span>
                <span class="sidebar-text">Cadastrar VeÃ­culo</span>
            </a>
            <div class="sidebar-tooltip">Cadastrar VeÃ­culo</div>
        </div>

        <div class="sidebar-item">
            <a th:href="@{/transportadora/fretes}" class="sidebar-link">
                <span class="sidebar-icon">ğŸ“¦</span>
                <span class="sidebar-text">Fretes</span>
            </a>
            <div class="sidebar-tooltip">Fretes</div>
        </div>

        <div class="sidebar-item">
            <a th:href="@{/transportadora/fretes/andamento}" class="sidebar-link">
                <span class="sidebar-icon">ğŸšš</span>
                <span class="sidebar-text">Fretes em Andamento</span>
            </a>
            <div class="sidebar-tooltip">Fretes em Andamento</div>
        </div>

        <div class="sidebar-item">
            <a th:href="@{/transportadora/relatorios}" class="sidebar-link">
                <span class="sidebar-icon">ğŸ“Š</span>
                <span class="sidebar-text">RelatÃ³rios</span>
            </a>
            <div class="sidebar-tooltip">RelatÃ³rios</div>
        </div>

        <div class="sidebar-item">
            <a th:href="@{/transportadora/motoristas}" class="sidebar-link">
                <span class="sidebar-icon">ğŸ‘¥</span>
                <span class="sidebar-text">Meus Motoristas</span>
            </a>
            <div class="sidebar-tooltip">Meus Motoristas</div>
        </div>

        <div class="sidebar-item">
            <a th:href="@{/transportadora/frota}" class="sidebar-link">
                <span class="sidebar-icon">ğŸš—</span>
                <span class="sidebar-text">Minha Frota</span>
            </a>
            <div class="sidebar-tooltip">Minha Frota</div>
        </div>

        <div class="sidebar-item">
            <a th:href="@{/transportadora/perfil}" class="sidebar-link">
                <span class="sidebar-icon">âš™ï¸</span>
                <span class="sidebar-text">ConfiguraÃ§Ãµes</span>
            </a>
            <div class="sidebar-tooltip">ConfiguraÃ§Ãµes</div>
        </div>
    </div>
</nav>

<div th:insert="~{shared-fragments/shared-header :: shared-header}"></div>

<div class="dashboard-container">
    <div class="dashboard-welcome">
        <h2 th:text="|Bem-vinda, ${transportadora.nomeFantasia}!|">Bem-vinda, Transportadora VIP!</h2>
        <p>Gerencie sua frota, motoristas e fretes de forma inteligente. Controle total das suas operaÃ§Ãµes em uma Ãºnica plataforma.</p>
    </div>

    <!-- Statistics Grid -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-number" th:text="${totalMotoristas}">24</div>
            <div class="stat-label">Motoristas Ativos</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" th:text="${totalVeiculos}">18</div>
            <div class="stat-label">VeÃ­culos na Frota</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" th:text="${fretesAndamento}">12</div>
            <div class="stat-label">Fretes em Andamento</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" th:text="${fretesFinalizados}">156</div>
            <div class="stat-label">Fretes Finalizados</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" th:text="|R$ ${receita}|">R$ 89.450</div>
            <div class="stat-label">Receita (MÃªs)</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" th:text="${mediaAvaliacao}">4.8</div>
            <div class="stat-label">AvaliaÃ§Ã£o MÃ©dia</div>
        </div>
    </div>

    <!-- Main Action Cards -->
    <div class="action-cards">
        <div class="action-card">
            <span class="action-card-icon">ğŸ‘¨â€ğŸ’¼</span>
            <h3>Cadastrar Motorista</h3>
            <p>Adicione novos motoristas Ã  sua equipe e expanda sua capacidade operacional.</p>
            <a th:href="@{/transportadora/motoristas/novo}" class="btn btn-primary">ğŸ‘¤ Cadastrar Motorista</a>
        </div>

        <div class="action-card">
            <span class="action-card-icon">ğŸš›</span>
            <h3>Cadastrar VeÃ­culo</h3>
            <p>Adicione novos veÃ­culos Ã  sua frota e aumente sua capacidade de transporte.</p>
            <a th:href="@{/veiculos/novo}" class="btn btn-primary">ğŸšš Cadastrar VeÃ­culo</a>
        </div>

        <div class="action-card">
            <span class="action-card-icon">ğŸ“¦</span>
            <h3>Gerenciar Fretes</h3>
            <p>Visualize todos os fretes, atribua motoristas e acompanhe o progresso das entregas.</p>
            <a th:href="@{/transportadora/fretes}" class="btn btn-secondary">ğŸ“‹ Ver Fretes</a>
        </div>

        <div class="action-card">
            <span class="action-card-icon">ğŸšš</span>
            <h3>Fretes em Andamento</h3>
            <p>Monitore fretes ativos e acompanhe entregas em tempo real.</p>
            <a th:href="@{/transportadora/fretes/andamento}" class="btn btn-secondary">ğŸšš Ver Andamento</a>
        </div>
    </div>

    <!-- Recent Activity Section -->
    <h2 class="section-title">ğŸ“ˆ Atividade Recente</h2>
    <div class="recent-activity">
        <div class="activity-header">
            <h3>Ãšltimas Atividades</h3>
        </div>
        <div class="activity-item">
            <div class="activity-icon">ğŸ“¦</div>
            <div class="activity-content">
                <div class="activity-title">Novo frete aceito: SÃ£o Paulo â†’ Rio de Janeiro</div>
                <div class="activity-time">HÃ¡ 2 horas</div>
            </div>
        </div>
        <div class="activity-item">
            <div class="activity-icon">ğŸ‘¨â€ğŸ’¼</div>
            <div class="activity-content">
                <div class="activity-title">Motorista JoÃ£o Silva cadastrado</div>
                <div class="activity-time">HÃ¡ 4 horas</div>
            </div>
        </div>
        <div class="activity-item">
            <div class="activity-icon">ğŸš›</div>
            <div class="activity-content">
                <div class="activity-title">VeÃ­culo Mercedes-Benz Actros adicionado Ã  frota</div>
                <div class="activity-time">HÃ¡ 1 dia</div>
            </div>
        </div>
        <div class="activity-item">
            <div class="activity-icon">âœ…</div>
            <div class="activity-content">
                <div class="activity-title">Frete BrasÃ­lia â†’ Salvador finalizado</div>
                <div class="activity-time">HÃ¡ 2 dias</div>
            </div>
        </div>
    </div>

    <!-- Fretes Section -->
    <h2 class="section-title">ğŸ“¦ Fretes DisponÃ­veis</h2>
    <div class="fretes-list">
        <div class="frete-item" th:each="frete : ${fretes}">
            <div class="frete-info">
                <div class="frete-origem-destino" th:text="|${frete.origem} ${frete.destino}|">
                    SÃ£o Paulo Rio de Janeiro
                </div>
                <div class="frete-detalhes">
                    <span th:text="|Peso: ${frete.peso}kg|">Peso: 2.500kg</span>
                    <span th:text="|DistÃ¢ncia: ${frete.distancia}km|">DistÃ¢ncia: 450km</span>
                    <span th:text="|Prazo: ${frete.prazo} dias|">Prazo: 3 dias</span>
                    <span th:text="|Tipo: ${frete.tipoVeiculo}|">Tipo: CaminhÃ£o</span>
                </div>
                <div class="frete-valor" th:text="|R$ ${frete.valor}|">R$ 3.500,00</div>
            </div>
            <div class="frete-acoes">
                <a th:href="@{/transportadora/fretes/{id}/aceitar(id=${frete.id})}" class="btn btn-primary">âœ… Aceitar Frete</a>
            </div>
        </div>

        <!-- Exemplo estÃ¡tico caso nÃ£o haja fretes do backend -->
        <div class="frete-item">
            <div class="frete-info">
                <div class="frete-origem-destino">Belo Horizonte Salvador</div>
                <div class="frete-detalhes">
                    <span>Peso: 1.800kg</span>
                    <span>DistÃ¢ncia: 680km</span>
                    <span>Prazo: 4 dias</span>
                    <span>Tipo: CaminhÃ£o</span>
                </div>
                <div class="frete-valor">R$ 4.200,00</div>
            </div>
            <div class="frete-acoes">
                <a href="#" class="btn btn-primary">âœ… Aceitar Frete</a>
            </div>
        </div>

        <div class="frete-item">
            <div class="frete-info">
                <div class="frete-origem-destino">BrasÃ­lia GoiÃ¢nia</div>
                <div class="frete-detalhes">
                    <span>Peso: 900kg</span>
                    <span>DistÃ¢ncia: 210km</span>
                    <span>Prazo: 1 dia</span>
                    <span>Tipo: Van</span>
                </div>
                <div class="frete-valor">R$ 1.200,00</div>
            </div>
            <div class="frete-acoes">
                <a href="#" class="btn btn-primary">âœ… Aceitar Frete</a>
            </div>
        </div>
    </div>

    <!-- Exemplo de lista de veÃ­culos da transportadora -->
    <h2 class="section-title">ğŸšš Frota da Transportadora</h2>
    <div class="veiculos-list">
        <div th:if="${#lists.isEmpty(veiculos)}" class="empty-state">
            <p>Nenhum veÃ­culo cadastrado para esta transportadora.</p>
            <a th:href="@{/veiculos/novo}" class="btn btn-secondary">Cadastrar VeÃ­culo</a>
        </div>
        <div th:each="veiculo : ${veiculos}" class="veiculo-item stat-card">
            <div class="veiculo-info">
                <div class="veiculo-header">
                    <span class="veiculo-placa" th:text="${veiculo.placa}">ABC-1234</span>
                    <span class="veiculo-marca" th:text="${veiculo.marca}">Marca</span>
                    <span class="veiculo-modelo" th:text="${veiculo.modelo}">Modelo</span>
                </div>
                <div class="veiculo-detalhes">
                    <span><b>Capacidade:</b> <span th:text="${veiculo.capacidadeCarga}">1000</span> kg</span>
                    <span><b>Renavam:</b> <span th:text="${veiculo.renavam}">123456789</span></span>
                    <span><b>Chassi:</b> <span th:text="${veiculo.chassi}">CHASSI123</span></span>
                </div>
            </div>
            <div class="veiculo-acoes">
                <a th:href="@{/veiculos/show/{id}(id=${veiculo.id})}" class="btn btn-primary">Detalhar</a>
            </div>
        </div>
    </div>
</div>

<footer>
    <p>&copy; 2024 Global Transportes. Conectando o Brasil com eficiÃªncia e seguranÃ§a.</p>
</footer>
</body>
</html>